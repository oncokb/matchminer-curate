<div class="container" style="min-height:550px" *ngIf="status['login']; else permission">
    <div class="input-group">
        <input type="text" class="form-control" [(ngModel)]="trialsToImport" placeholder="Enter trial in the format: NCT02057133, NCT03006172"
            size="100">
        <span class="input-group-btn">
            <button class="btn btn-primary" [disabled]="!trialsToImport" (click)="importTrials()">Import New Trials</button>
        </span>
    </div>
    <div *ngIf="messages.length > 0">
        <br/>
        <div *ngFor="let message of messages">
            <span style="color: green;" *ngIf="message.indexOf('Successfully') !== -1; else failedMessage"> {{message}} </span>
            <ng-template #failedMessage>
                    <span style="color: red;"> {{message}} </span>
            </ng-template>
        </div>
    </div>
    <br/>
    <br/>
    <div class="form-group">
        <label for="trialToCurate">Select a clinical trial to curate</label>
        <select class="form-control" id="trialToCurate" (change)="curateTrial()" [(ngModel)]="nctIdChosen">
            <option *ngFor="let trial of trialList" [value]="trial.nct_id">{{trial.nct_id + ' ' + trial.short_title}}</option>
        </select>
    </div>
    <br/>
    <div *ngIf="nctIdChosen" style="margin-bottom: 100px">
        <div *ngFor="let item of trialChosen | async">
            <label for="nctId">NCT ID: </label>
            <span id="nctId" style="margin-left:10px">
                <a target="_blank" href="https://clinicaltrials.gov/ct2/show/{{item.nct_id}}">{{ item.nct_id }}</a>
            </span>
            <br/>
            <label for="phase">Phase: </label>
            <span id="phase" style="margin-left:10px">{{ item.phase }}</span>
            <br/>
            <label for="status">Status: </label>
            <span id="status" style="margin-left:10px">{{ item.status }}</span>
            <br/>
            <label for="shortTitle">Short Title: </label>
            <span id="shortTitle" style="margin-left:10px">{{ item.short_title }}</span>
            <br/>
            <label for="longTitle">Long Title: </label>
            <span id="longTitle" style="margin-left:10px">{{ item.long_title }}</span>
            <br/>
            <label for="treatmentList">Treatment List:</label>
            <div id="treatmentList">
                <span>-arm: <jhi-panel [type]="'add'" [arm]="true" [path]="'arms'"></jhi-panel></span>
                <br/>
                <div *ngFor="let arm of item.treatment_list.step[0].arm; let i = index">
                    <jhi-arm [type]="'delete,edit'" [unit]="arm" [path]="'arm_name,'+i"></jhi-arm>
                    <span class="matchTitle2">-match </span>
                    <jhi-panel [type]="'add,destination'" [path]="'arm,'+i"></jhi-panel>
                    <div class="indent2 levelIndicator">
                        <jhi-match [match]="arm.match" [path]="'arm,'+i"></jhi-match>
                    </div>
                    <br/>
                </div>
                <span class="matchTitle1">-match </span>
                <jhi-panel [type]="'add,destination'" [path]="'match'"></jhi-panel>
                <div class="indent1 levelIndicator">
                    <jhi-match [match]="item.treatment_list.step[0].match" [path]="'match'"></jhi-match>
                </div>
                <div style="margin-top:150px;">
                    <p>
                        Note*
                        <i class="fa fa-plus noteAdd" aria-hidden="true"></i>: Add
                        <i class="fa fa-trash-o noteDelete" aria-hidden="true"></i>: Delete
                        <i class="fa fa-pencil noteEdit" aria-hidden="true"></i>: Edit
                    </p>
                    <p>Click (<i class="fa fa-exchange noteExchange"></i>) to switch logic between "and" and "or"</p>
                    <p>Click (<i class="fa fa-arrows noteMove" aria-hidden="true"></i>) to move this section; click again to cancel. 
                        Click (<i class="fa fa-arrows noteDestination" aria-hidden="true"></i>) to use as your destination.</p>
                </div>
            </div>
        </div>
    </div>
</div>
<ng-template #permission>
    <div class="container" style="min-height:550px">
        Matchminer Curation Platform is proprietary resource. If you are not authorized to access this system, please exit immediately.
    </div>
</ng-template>